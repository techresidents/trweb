{% extends "navbar_authenticated.html" %}
{% load staticfiles %}
{% load url from future %}

{% block title %}Home | Tech Residents{% endblock %}

{% block extrahead %}
    <link href="{% static "css/home.css" %}" rel="stylesheet">
{% endblock %}

{% block content %}

    <div class="container">

        <div class="page-header">
            <h1>Welcome to Tech Residents</h1>
        </div>

        <div class="row">
            <div class="span4">
                <div class="well">
                    <h4>{{ full_name }}</h4>
                    <p>Your <a href="{% url 'accounts.views.profile_account' %}">profile</a> is {{ profile_completed }}% complete</p>
                    {% if recommended_actions|length > 0 %}
                        <p>Recommended actions:</p>
                        <ul>
                            {% for action in recommended_actions %}
                                {% if action.category == 'profile' %}
                                    <li><p>Update your <a href="{{ action.link }}">profile</a></p></li>
                                {% elif action.category == 'chat' %}
                                    <li><p>Participate in chat <a href="{{ action.link }}">{{ action.chat_name }}</a></p></li>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </ul>
                </div>
            </div>
            <div class="span8">
                <div class="well home-all-topics-container">

                    <div class="home-all-topics-header">
                        <h3>Chat Topics</h3>
                    </div>

                    {% for topic_ctx in chat_topics %}
                        <div class="home-topic-row">
                            <div class="home-topic-divider"></div>
                            <div class="clearfix home-topic-container">
                                {% if topic_ctx.topic.recommended_participants == 1 %}
                                    <img class="pull-left" rel="tooltip" title="1 participant recommended" alt="single participant chat topic" src="{% static 'img/person_50x38.png' %}"/>
                                {% else %}
                                    <img class="pull-left" rel="tooltip" title="2 participants recommended" alt="Multiple participant chat topic" src="{% static 'img/people_50x38.png' %}"/>
                                {% endif %}

                                <div class="home-topic-text-container">
                                    <h4>{{topic_ctx.topic.title}}
                                        <small>({{ topic_ctx.topic.duration }} mins)</small>
                                        {% if topic_ctx.completed %}
                                            <small class="home-green-text"><b>Complete</b></small>
                                        {% endif %}
                                    </h4>
                                    <p class="home-topic-description">{{ topic_ctx.topic.description }}</p>
                                    <a class="home-topic-description" href="{% url 'topic.views.details' encoded_topic_id=topic_ctx.encoded_topic_id %}">Sign Up</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

    </div>

    <script src="{% static "js/3ps/jquery/jquery-min.js" %}"></script>
    <script src="{% static "js/3ps/bootstrap/bootstrap-min.js" %}"></script>
    <script>
        $(document).ready(function(){

            $("[rel=tooltip]").tooltip();

            $(".home-topic-container").click(function(){
                window.location=$(this).find("a").attr("href");
                return false;
            });

        });
    </script>

{% endblock %}