{% extends "chat/navbar_chat_app.html" %}
{% load staticfiles %}
{% load url from future %}
{% load verbatim %}

{% block title %}Tech Residents - Chat{% endblock %}

{% block extrahead %}
    <link href="{% static "css/chat.css" %}" rel="stylesheet">
{% endblock %}

{% block content %}

    <div id="chatapp"></div>

    <!-- All of these data structures are generated on the server w/out user input, so it's safe -->
    {% autoescape off %}
        <script>
            data =  {
                chatAPIKey: "{{chat_api_key}}",
                chatSessionId: "{{chat_session_id}}",
                chatSessionToken: "{{chat_session_token}}",
                chatUserToken: "{{chat_user_token}}",
                chatRecorded: {{chat_record_json}},
                users: {{users_json}},
                topics: {{topics_json}},
                resources: {{resources_json}}
            };
        </script>
    {% endautoescape %}

    <script src="{{TOKBOX_JS_URL}}"></script>

    {% autoescape off %}
        <script>
            TR = { XD: { remote: "{{TR_XD_REMOTE}}" } };
        </script>
    {% endautoescape %}

    <script>
        var require = {
            baseUrl: '/static/js'
        };
    </script>
    <script data-main="{% static "js/apps/chat/main.js" %}" src="{% static "js/3ps/require/require.js" %}"></script>

{% endblock %}
